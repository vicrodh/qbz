import{u as g,j as t}from"./main-CavKoxcs.js";import{u,r as d}from"./vendor-i18n-cI2jDZAk.js";import{f as p}from"./format-D19H1wt9.js";import"./vendor-react-Dh3zDKDA.js";const f="https://api.github.com/repos/vicrodh/qbz/releases",x=i=>{if(!i)return[];const s=i.split(`
`).map(a=>a.trim()).filter(a=>a.startsWith("- ")||a.startsWith("* ")).map(a=>a.replace(/^[-*]\s*/,"")).filter(Boolean);return s.length>0?s.slice(0,8):i.split(". ").map(a=>a.trim()).filter(Boolean).slice(0,3)},j=i=>{const s=[];let n=i,a=0;for(;n.length>0;){const r=n.match(/\*\*(.+?)\*\*/),o=n.match(/`([^`]+)`/),l=r?n.indexOf(r[0]):-1,e=o?n.indexOf(o[0]):-1;if(l===-1&&e===-1){s.push(n);break}const c=e!==-1&&(l===-1||e<l),h=c?o:r,m=c?e:l;m>0&&s.push(n.substring(0,m)),c?s.push(t.jsx("code",{className:"inline-code",children:h[1]},a++)):s.push(t.jsx("strong",{children:h[1]},a++)),n=n.substring(m+h[0].length)}return s.length===1&&typeof s[0]=="string"?s[0]:t.jsx(t.Fragment,{children:s})};function w(){const{t:i}=u(),{language:s}=g(),[n,a]=d.useState([]),[r,o]=d.useState(!0);d.useEffect(()=>{let e=!0;return fetch(f).then(c=>c.ok?c.json():Promise.reject(new Error("release fetch failed"))).then(c=>{e&&(a(c),o(!1))}).catch(()=>{e&&o(!1)}),()=>{e=!1}},[]);const l=d.useMemo(()=>n.map((e,c)=>({...e,isLatest:c===0,highlights:x(e.body)})),[n]);return t.jsx("section",{className:"section",children:t.jsxs("div",{className:"container",children:[t.jsx("h1",{className:"section__title",children:i("changelog.title")}),t.jsx("p",{className:"section__subtitle",children:i("changelog.lead")}),r&&t.jsx("div",{className:"card",children:i("changelog.loading")}),!r&&l.length===0&&t.jsx("div",{className:"card",children:i("changelog.empty")}),t.jsx("div",{className:"changelog-grid",style:{marginTop:32},children:l.map(e=>t.jsxs("div",{className:`card ${e.isLatest?"card--highlight":""}`,children:[t.jsxs("div",{className:"download-meta",children:[t.jsx("div",{className:"download-meta__name",children:e.isLatest?i("changelog.latestLabel"):e.name||e.tag_name}),t.jsxs("div",{className:"download-meta__file",children:[e.tag_name," Â· ",p(e.published_at,s)]})]}),t.jsx("ul",{className:"list",children:e.highlights.map((c,h)=>t.jsx("li",{children:j(c)},h))}),t.jsx("a",{className:"btn btn-ghost",href:e.html_url,target:"_blank",rel:"noreferrer",style:{marginTop:24},children:i("changelog.viewOnGitHub")})]},e.id))})]})})}export{w as ChangelogPage};
