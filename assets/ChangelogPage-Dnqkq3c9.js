import{u as m,j as s,f as u}from"./main-Cj9Gto_D.js";import{u as p,r as d}from"./vendor-i18n-cI2jDZAk.js";import"./vendor-react-Dh3zDKDA.js";const f="https://api.github.com/repos/vicrodh/qbz/releases",x=i=>{if(!i)return[];const t=i.split(`
`).map(a=>a.trim()).filter(a=>a.startsWith("- ")||a.startsWith("* ")).map(a=>a.replace(/^[-*]\s*/,"")).filter(Boolean);return t.length>0?t.slice(0,8):i.split(". ").map(a=>a.trim()).filter(Boolean).slice(0,3)},j=i=>{const t=[];let n=i,a=0;for(;n.length>0;){const r=n.match(/\*\*(.+?)\*\*/),o=n.match(/`([^`]+)`/),l=r?n.indexOf(r[0]):-1,e=o?n.indexOf(o[0]):-1;if(l===-1&&e===-1){t.push(n);break}const c=e!==-1&&(l===-1||e<l),h=c?o:r,g=c?e:l;g>0&&t.push(n.substring(0,g)),c?t.push(s.jsx("code",{className:"inline-code",children:h[1]},a++)):t.push(s.jsx("strong",{children:h[1]},a++)),n=n.substring(g+h[0].length)}return t.length===1&&typeof t[0]=="string"?t[0]:s.jsx(s.Fragment,{children:t})};function v(){const{t:i}=p(),{language:t}=m(),[n,a]=d.useState([]),[r,o]=d.useState(!0);d.useEffect(()=>{let e=!0;return fetch(f).then(c=>c.ok?c.json():Promise.reject(new Error("release fetch failed"))).then(c=>{e&&(a(c),o(!1))}).catch(()=>{e&&o(!1)}),()=>{e=!1}},[]);const l=d.useMemo(()=>n.map((e,c)=>({...e,isLatest:c===0,highlights:x(e.body)})),[n]);return s.jsx("section",{className:"section",children:s.jsxs("div",{className:"container",children:[s.jsx("h1",{className:"section__title",children:i("changelog.title")}),s.jsx("p",{className:"section__subtitle",children:i("changelog.lead")}),r&&s.jsx("div",{className:"card",children:i("changelog.loading")}),!r&&l.length===0&&s.jsx("div",{className:"card",children:i("changelog.empty")}),s.jsx("div",{className:"changelog-grid",style:{marginTop:32},children:l.map(e=>s.jsxs("div",{className:`card ${e.isLatest?"card--highlight":""}`,children:[s.jsxs("div",{className:"download-meta",children:[s.jsx("div",{className:"download-meta__name",children:e.isLatest?i("changelog.latestLabel"):e.name||e.tag_name}),s.jsxs("div",{className:"download-meta__file",children:[e.tag_name," Â· ",u(e.published_at,t)]})]}),s.jsx("ul",{className:"list",children:e.highlights.map((c,h)=>s.jsx("li",{children:j(c)},h))}),s.jsx("a",{className:"btn btn-ghost",href:e.html_url,target:"_blank",rel:"noreferrer",style:{marginTop:24},children:i("changelog.viewOnGitHub")})]},e.id))})]})})}export{v as ChangelogPage};
